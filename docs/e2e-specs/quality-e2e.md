# 回答品質確認画面 E2Eテスト仕様書

生成日: 2026-02-06
対象ページ: `/admin/quality`
権限レベル: admin

---

## ユーザーゴール

1. 回答履歴の一覧を確認する
2. フィードバック（良い/悪い/未評価/回答失敗）でフィルタする
3. 特定の回答の詳細を確認する
4. 検索機能で質問・回答を絞り込む

---

## テスト環境

```yaml
URL: http://localhost:3247/admin/quality
認証: 必須（ProtectedRoute + admin権限）
テストアカウント:
  email: admin@example.com
  password: admin123
```

---

## E2Eテスト項目一覧（7項目）

| ID | テスト項目 | フロー内容 | 期待結果 |
|----|----------|-----------|---------|
| E2E-QUAL-001 | ページ表示・履歴一覧確認 | 管理者ログイン → /admin/quality → テーブル表示 | 回答履歴一覧（質問、類似度、評価、日時）が表示される |
| E2E-QUAL-002 | フィルター「良い」適用 | トグルボタンで「良い」選択 | feedback=goodの履歴のみ表示される（👍アイコン付き） |
| E2E-QUAL-003 | フィルター「悪い」適用 | トグルボタンで「悪い」選択 | feedback=badの履歴のみ表示される（👎アイコン付き） |
| E2E-QUAL-004 | フィルター「回答失敗」適用 | トグルボタンで「回答失敗」選択 | is_no_answer=trueの履歴のみ表示される（⚠️アイコン付き） |
| E2E-QUAL-005 | 検索機能 | 検索ボックスにキーワード入力 → 結果絞り込み | 質問または回答にキーワードが含まれる履歴のみ表示される |
| E2E-QUAL-006 | 詳細表示フロー | テーブル行の詳細ボタン → ダイアログ表示 | 質問・回答全文・類似度スコア・ユーザー評価・日時が表示される |
| E2E-QUAL-007 | 類似度スコアの色分け表示 | 類似度チップ確認 | 70%以上=緑（success）、50-70%=オレンジ（warning）、50%未満=赤（error） |

---

## 備考

- 回答失敗（is_no_answer）は類似度スコアが存在しないため、チップに「-」が表示される
- 詳細ダイアログでは`full_answer`を使用（テーブルでは短縮表示）
- フィルターは排他的（1つのみ選択可能）
