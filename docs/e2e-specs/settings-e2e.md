# システム設定画面 E2Eテスト仕様書

生成日: 2026-02-06
対象ページ: `/admin/settings`
権限レベル: admin

---

## ユーザーゴール

1. 企業情報（企業名、ロゴURL、問い合わせ先）を確認・更新する
2. AI設定（モデル、最大トークン数、確信度閾値、Temperature）を確認・更新する
3. 認証設定（SSO有効化、SSOプロバイダー、セッションタイムアウト）を確認・更新する

---

## テスト環境

```yaml
URL: http://localhost:3247/admin/settings
認証: 必須（ProtectedRoute + admin権限）
テストアカウント:
  email: admin@example.com
  password: admin123
```

---

## E2Eテスト項目一覧（6項目）

| ID | テスト項目 | フロー内容 | 期待結果 |
|----|----------|-----------|---------||
| E2E-SET-001 | ページ表示・設定値読み込み | 管理者ログイン → /admin/settings → 各セクション表示 | 企業情報・AI設定・認証設定の3セクションが表示され、現在の設定値が入力欄に反映される |
| E2E-SET-002 | 企業情報更新フロー | 企業名を変更 → 「設定を保存」ボタン → 成功 | 企業名変更後、成功スナックバー表示。リロード後も変更が保持される |
| E2E-SET-003 | AI設定更新フロー | AIモデル変更 + 確信度閾値スライダー変更 → 「設定を保存」 | モデル選択・スライダー変更後、成功スナックバー表示。リロード後も変更が保持される |
| E2E-SET-004 | SSO有効化フロー | SSO認証スイッチON → SSOプロバイダー選択UI表示 → プロバイダー選択 → 保存 | スイッチONでプロバイダー選択ドロップダウンとinfoアラートが表示される |
| E2E-SET-005 | SSO無効化フロー | SSO認証スイッチOFF → 保存 | プロバイダー選択UIが非表示になる。保存成功。 |
| E2E-SET-006 | ローディング状態の確認 | ページ初回アクセス時 | ローディングインジケータ（CircularProgress）が表示され、データ取得後にフォームが表示される |

---

## 備考

- 確信度閾値スライダーは0.5〜0.95の範囲（0.05刻み）
- Temperatureスライダーは0〜1の範囲（0.1刻み）
- SSOプロバイダーはOkta、Azure AD、Google Workspaceの3種類
- セッションタイムアウトは1〜168時間（1週間）
- 保存時のリクエストは PUT /api/admin/settings
